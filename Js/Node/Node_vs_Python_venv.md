# Node.js vs Python: Сравнение подходов к зависимостям

Этот конспект объясняет, почему Node.js и Python virtual environment (venv) — это не одно и то же, и как устроена изоляция зависимостей в обоих мирах.

---

## 1. Сравнение компонентов

```
┌─────────────────────────────────┬─────────────────────────────┬─────────────────────────────────────┐
│ Компонент                       │ В мире Python               │ В мире JavaScript / Node.js         │
├─────────────────────────────────┼─────────────────────────────┼─────────────────────────────────────┤
│ Язык                            │ Python                      │ JavaScript                          │
├─────────────────────────────────┼─────────────────────────────┼─────────────────────────────────────┤
│ Исполнитель (кто запускает)     │ Интерпретатор python        │ Среда выполнения node               │
│                                 │ (cpython)                   │                                     │
├─────────────────────────────────┼─────────────────────────────┼─────────────────────────────────────┤
│ Менеджер пакетов                │ pip                         │ npm, pnpm, yarn                     │
├─────────────────────────────────┼─────────────────────────────┼─────────────────────────────────────┤
│ Хранение библиотек              │ Глобально или в venv        │ Локально в node_modules             │
│                                 │                             │ (по умолчанию)                      │
└─────────────────────────────────┴─────────────────────────────┴─────────────────────────────────────┘
```

---

## 2. Почему Node.js ≠ Virtual Environment?

Когда спрашивают: *"В чем разница между Node и virtual env?"*, это всё равно что спросить: *"В чем разница между двигателем машины и гаражом для запчастей?"*.

*   **Node.js** — это сам **Python (интерпретатор)**. Это то, что выполняет код.
*   **Virtual Environment (venv) в Python** — это инструмент изоляции зависимостей.

---

## 3. Почему в Python нужен venv, а в Node.js — нет?

Это фундаментальное отличие в дизайне.

### Как это в Python:
По умолчанию `pip install requests` ставит библиотеку **глобально** в систему (или в папку пользователя).
Если у тебя проект А требует `requests v1.0`, а проект Б требует `requests v2.0` — возникает конфликт.

*Решение:* Ты создаёшь `venv` (виртуальное окружение), которое говорит питону: *"Смотри библиотеки только в этой папке"*.

### Как это в Node.js:
В Node.js этот "дизайн" встроен изначально. Когда ты пишешь `npm install react`, Node.js **не** ставит это в систему. Он создаёт папку `node_modules` прямо внутри твоего проекта.

**Вывод:** В Node.js **каждый проект — это уже, по сути, своё виртуальное окружение**. Ему не нужна отдельная сущность `venv`, потому что изоляция зависимостей — это стандартное поведение `npm`/`node`.

---

## 4. Ментальная модель: Два подхода

### Python подход (с venv):
1. У тебя есть **ОДИН** системный Python.
2. Ты создаёшь "коробку" (venv) для проекта.
3. Ты заходишь в коробку (`source venv/bin/activate`).
4. Теперь Python берёт инструменты только из этой коробки.

### Node.js подход:
1. У тебя есть **ОДИН** системный Node.js (или управляемый через nvm).
2. Ты просто заходишь в папку проекта.
3. Node.js автоматически видит папку `node_modules` рядом с кодом и берёт инструменты оттуда.
4. Ничего "активировать" не нужно. Логика поиска зависимостей ("Node Resolution Algorithm") сама ищет папку `node_modules` в текущей директории и выше.

---

## 5. Управление версиями runtime

А что если проекту А нужен **Python 3.8**, а проекту Б — **Python 3.11**? `venv` тут не поможет — используют `pyenv`.

В Node.js аналогичная ситуация решается через **NVM** / **FNM** / **Volta**.

```
┌────────────────────────────────┬─────────────────────┬───────────────────────────┐
│ Задача                         │ Инструмент Python   │ Инструмент Node.js        │
├────────────────────────────────┼─────────────────────┼───────────────────────────┤
│ Изоляция библиотек проекта     │ venv / poetry       │ Встроено (node_modules)   │
├────────────────────────────────┼─────────────────────┼───────────────────────────┤
│ Управление версией языка       │ pyenv / conda       │ nvm / fnm / volta         │
└────────────────────────────────┴─────────────────────┴───────────────────────────┘
```

---

## Итого

| Аспект | Python | Node.js |
|--------|--------|---------|
| Изоляция зависимостей | Требует venv/poetry | Встроено (node_modules) |
| Где хранятся пакеты | Глобально (по умолчанию) | Локально (по умолчанию) |
| Активация окружения | Нужна (`source venv/bin/activate`) | Не нужна |
| Управление версией runtime | pyenv / conda | nvm / fnm / volta |

